{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Run libera-core (ASan/UBSan)",
            "type": "lldb",
            "request": "launch",
            "program": "${command:cmake.launchTargetPath}",
            "args": [],
            "cwd": "${workspaceFolder}",
            "env": {
                // Useful ASan knobs
                "ASAN_OPTIONS": "halt_on_error=1:abort_on_error=1:detect_leaks=1:strict_string_checks=1",
                // Make UBsan fatal so the debugger stops immediately
                "UBSAN_OPTIONS": "halt_on_error=1:print_stacktrace=1"
            },
            "stopOnEntry": false,
            "preLaunchTask": "CMake: build"
        },
        {
            "name": "Run libera-core (TSan)",
            "type": "lldb",
            "request": "launch",
            "program": "${command:cmake.launchTargetPath}",
            "args": [],
            "cwd": "${workspaceFolder}",
            "env": {
                "TSAN_OPTIONS": "halt_on_error=1:history_size=7:report_signal_unsafe=1"
            },
            "stopOnEntry": false,
            "preLaunchTask": "CMake: build",
            "initCommands": [
                "br set -E c++"
            ]
        }
    ]
}